<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã«ã‚ƒã‚“ã“ã‚¯ã‚¤ã‚º - æ„›çŒ«ã¨ä¸€ç·’ã«æˆé•·ã—ã‚ˆã†ï¼</title>
    <style>
        /* ãƒªã‚»ãƒƒãƒˆCSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #FFE5F4, #E8F4FD, #FFF2E5);
            background-size: 400% 400%;
            animation: gradientShift 6s ease infinite;
            min-height: 100vh;
            padding: 10px;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        /* ç”»é¢ã®åŸºæœ¬è¨­å®š */
        .screen {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 182, 193, 0.3);
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ */
        .title h1 {
            text-align: center;
            color: #FF69B4;
            font-size: clamp(24px, 5vw, 36px);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .title p {
            text-align: center;
            color: #666;
            font-size: clamp(14px, 3vw, 18px);
            margin-bottom: 30px;
        }

        .cat-display {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(145deg, #FFB6C1, #FFC0CB);
            border-radius: 15px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .cat {
            font-size: clamp(60px, 15vw, 120px);
            margin: 10px 0;
            animation: bounce 2s infinite;
            display: inline-block;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .cat-name, .cat-level {
            font-size: clamp(14px, 3vw, 18px);
            color: #8B4513;
            margin: 5px 0;
            font-weight: bold;
        }

        /* ãƒ¬ãƒ™ãƒ«é¸æŠ */
        .level-select {
            text-align: center;
            margin: 30px 0;
        }

        .level-select h3 {
            color: #FF69B4;
            font-size: clamp(18px, 4vw, 24px);
            margin-bottom: 20px;
        }

        .level-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .level-btn {
            background: linear-gradient(145deg, #FFE4E1, #FFF0F5);
            border: 2px solid #FFB6C1;
            border-radius: 15px;
            padding: 12px 20px;
            font-size: clamp(14px, 3vw, 16px);
            color: #8B4513;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            font-weight: bold;
            min-width: 120px;
        }

        .level-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.3);
            background: linear-gradient(145deg, #FFB6C1, #FFC0CB);
        }

        .level-btn:active {
            transform: translateY(-1px);
        }

        /* ã‚²ãƒ¼ãƒ ç”»é¢ */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .game-info {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            font-size: clamp(12px, 2.5vw, 16px);
            color: #8B4513;
            font-weight: bold;
        }

        .timer-container {
            display: flex;
            align-items: center;
        }

        .timer {
            background: linear-gradient(145deg, #FF69B4, #FFB6C1);
            color: white;
            padding: 10px 15px;
            border-radius: 50%;
            font-size: clamp(16px, 4vw, 24px);
            font-weight: bold;
            min-width: 60px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .timer.warning {
            background: linear-gradient(145deg, #FF6B6B, #FF8E8E);
            animation: shake 0.5s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* çŒ«ã®çŠ¶æ…‹è¡¨ç¤º */
        .cat-status {
            text-align: center;
            margin: 20px 0;
            position: relative;
        }

        #gameCat {
            font-size: clamp(40px, 10vw, 80px);
            margin: 10px 0;
            transition: all 0.3s ease;
        }

        .cat-emotion {
            font-size: clamp(20px, 5vw, 30px);
            position: absolute;
            top: -10px;
            right: calc(50% - 40px);
            animation: float 2s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        #catMessage {
            color: #FF69B4;
            font-size: clamp(14px, 3vw, 18px);
            font-weight: bold;
            margin-top: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* å•é¡Œã‚³ãƒ³ãƒ†ãƒŠ */
        .question-container {
            margin: 30px 0;
        }

        #question {
            background: linear-gradient(145deg, #FFF8DC, #FFFACD);
            border: 2px solid #FFB6C1;
            border-radius: 15px;
            padding: 20px;
            font-size: clamp(16px, 4vw, 22px);
            color: #8B4513;
            text-align: center;
            margin-bottom: 25px;
            line-height: 1.4;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .option-btn {
            background: linear-gradient(145deg, #E6F3FF, #F0F8FF);
            border: 2px solid #87CEEB;
            border-radius: 12px;
            padding: 15px 20px;
            font-size: clamp(14px, 3vw, 18px);
            color: #4B0082;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            font-weight: bold;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(135, 206, 235, 0.3);
            background: linear-gradient(145deg, #B0E0E6, #E0F6FF);
        }

        .option-btn.correct {
            background: linear-gradient(145deg, #90EE90, #98FB98);
            border-color: #32CD32;
            color: #006400;
            animation: correctPulse 0.6s ease;
        }

        .option-btn.incorrect {
            background: linear-gradient(145deg, #FFB6C1, #FFC0CB);
            border-color: #FF69B4;
            color: #8B0000;
            animation: shake 0.6s ease;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
        .progress-bar {
            background: #E0E0E0;
            border-radius: 10px;
            height: 10px;
            margin-top: 20px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .progress {
            background: linear-gradient(90deg, #FFB6C1, #FF69B4);
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 2px 5px rgba(255, 105, 180, 0.3);
        }

        /* çµæœç”»é¢ */
        .result-content {
            text-align: center;
        }

        #resultTitle {
            color: #FF69B4;
            font-size: clamp(24px, 5vw, 32px);
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .final-score {
            background: linear-gradient(145deg, #FFF8DC, #FFFACD);
            border: 2px solid #FFB6C1;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-size: clamp(16px, 4vw, 20px);
            color: #8B4513;
            font-weight: bold;
        }

        /* çŒ«ã®é€²åŒ–è¡¨ç¤º */
        .cat-evolution {
            margin: 30px 0;
            padding: 20px;
            background: linear-gradient(145deg, #E6F3FF, #F0F8FF);
            border-radius: 15px;
            border: 2px solid #87CEEB;
        }

        .cat-before-after {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .evolution-step {
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        .evolution-step .cat {
            font-size: clamp(50px, 12vw, 100px);
            margin: 10px 0;
        }

        .arrow {
            font-size: clamp(24px, 6vw, 40px);
            color: #FF69B4;
            font-weight: bold;
        }

        #evolutionMessage {
            font-size: clamp(14px, 3vw, 18px);
            color: #4B0082;
            font-weight: bold;
            margin-top: 15px;
        }

        /* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .action-btn {
            background: linear-gradient(145deg, #FFE4E1, #FFF0F5);
            border: 2px solid #FFB6C1;
            border-radius: 12px;
            padding: 12px 24px;
            font-size: clamp(14px, 3vw, 18px);
            color: #8B4513;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            font-weight: bold;
            min-width: 140px;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.3);
            background: linear-gradient(145deg, #FFB6C1, #FFC0CB);
        }

        .action-btn:active {
            transform: translateY(-1px);
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 600px) {
            .container {
                padding: 5px;
            }
            
            .screen {
                padding: 15px;
                border-radius: 15px;
            }
            
            .game-header {
                flex-direction: column;
                text-align: center;
            }
            
            .game-info {
                justify-content: center;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .cat-before-after {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .action-btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
        <div id="startScreen" class="screen active">
            <div class="title">
                <h1>ğŸ± ã«ã‚ƒã‚“ã“ã‚¯ã‚¤ã‚º ğŸ±</h1>
                <p>æ„›çŒ«ã¨ä¸€ç·’ã«ã‚¯ã‚¤ã‚ºã«æŒ‘æˆ¦ã—ã‚ˆã†ï¼</p>
            </div>
            
            <div class="cat-display">
                <div class="cat">ğŸ±</div>
                <p class="cat-name">ã¾ã åå‰ãŒãªã„ã«ã‚ƒ</p>
                <p class="cat-level">ãƒ¬ãƒ™ãƒ«: 0</p>
            </div>
            
            <div class="level-select">
                <h3>ãƒ¬ãƒ™ãƒ«ã‚’é¸ã‚“ã§ã­</h3>
                <div class="level-buttons">
                    <button class="level-btn" data-level="1">ãƒ¬ãƒ™ãƒ«1 ğŸŒŸ</button>
                    <button class="level-btn" data-level="2">ãƒ¬ãƒ™ãƒ«2 ğŸŒŸğŸŒŸ</button>
                    <button class="level-btn" data-level="3">ãƒ¬ãƒ™ãƒ«3 ğŸŒŸğŸŒŸğŸŒŸ</button>
                    <button class="level-btn" data-level="4">ãƒ¬ãƒ™ãƒ«4 ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</button>
                    <button class="level-btn" data-level="5">ãƒ¬ãƒ™ãƒ«5 ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ</button>
                </div>
            </div>
        </div>

        <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
        <div id="gameScreen" class="screen">
            <div class="game-header">
                <div class="game-info">
                    <span id="currentLevel">ãƒ¬ãƒ™ãƒ« 1</span>
                    <span id="questionNumber">å•é¡Œ 1/10</span>
                    <span id="score">ã‚¹ã‚³ã‚¢: 0</span>
                </div>
                <div class="timer-container">
                    <div class="timer" id="timer">30</div>
                </div>
            </div>

            <div class="cat-status">
                <div class="cat" id="gameCat">ğŸ±</div>
                <div class="cat-emotion" id="catEmotion">ğŸ˜Š</div>
                <p id="catMessage">ãŒã‚“ã°ã‚‹ã«ã‚ƒï¼</p>
            </div>

            <div class="question-container">
                <h2 id="question">å•é¡ŒãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</h2>
                <div class="options">
                    <button class="option-btn" data-answer="0"></button>
                    <button class="option-btn" data-answer="1"></button>
                    <button class="option-btn" data-answer="2"></button>
                    <button class="option-btn" data-answer="3"></button>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
        </div>

        <!-- çµæœç”»é¢ -->
        <div id="resultScreen" class="screen">
            <div class="result-content">
                <h2 id="resultTitle">ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</h2>
                
                <div class="final-score">
                    <p>æœ€çµ‚ã‚¹ã‚³ã‚¢: <span id="finalScore">0</span></p>
                    <p>æ­£è§£ç‡: <span id="accuracy">0%</span></p>
                </div>

                <div class="cat-evolution">
                    <div class="cat-before-after">
                        <div class="evolution-step">
                            <p>ãƒ¬ãƒ™ãƒ«å‰</p>
                            <div class="cat" id="oldCat">ğŸ±</div>
                        </div>
                        <div class="arrow">â†’</div>
                        <div class="evolution-step">
                            <p>ãƒ¬ãƒ™ãƒ«å¾Œ</p>
                            <div class="cat" id="newCat">ğŸ±</div>
                        </div>
                    </div>
                    <p id="evolutionMessage"></p>
                </div>

                <div class="action-buttons">
                    <button id="nextLevelBtn" class="action-btn">æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã«æŒ‘æˆ¦ï¼</button>
                    <button id="retryBtn" class="action-btn">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                    <button id="homeBtn" class="action-btn">ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹ç®¡ç†
        let gameState = {
            currentLevel: 1,
            currentQuestion: 0,
            score: 0,
            correctAnswers: 0,
            totalQuestions: 10,
            catLevel: 0,
            timeLeft: 30,
            timer: null,
            questions: []
        };

        // çŒ«ã®é€²åŒ–æ®µéš
        const catEvolutions = {
            0: { emoji: 'ğŸ±', name: 'ã“ã­ã“ã¡ã‚ƒã‚“', message: 'ã‚ˆã‚ã—ãã«ã‚ƒï¼' },
            1: { emoji: 'ğŸ˜º', name: 'ã’ã‚“ãã­ã“', message: 'ãŒã‚“ã°ã‚‹ã«ã‚ƒï¼' },
            2: { emoji: 'ğŸ˜¸', name: 'ãˆãŒãŠã­ã“', message: 'ã†ã‚Œã—ã„ã«ã‚ƒï¼' },
            3: { emoji: 'ğŸ˜»', name: 'ã‚‰ã¶ã‚Šãƒ¼ã­ã“', message: 'ã ã„ã™ãã«ã‚ƒï¼' },
            4: { emoji: 'ğŸ¤©', name: 'ã™ãŸãƒ¼ã­ã“', message: 'ã™ã”ã„ã«ã‚ƒï¼' },
            5: { emoji: 'ğŸ‘‘', name: 'ãŠã†ã•ã¾ã­ã“', message: 'ã•ã„ã“ã†ã«ã‚ƒï¼' }
        };

        // ã‚¯ã‚¤ã‚ºå•é¡Œãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
        const quizDatabase = {
            1: [ // ãƒ¬ãƒ™ãƒ«1 - ç°¡å˜
                { question: 'çŒ«ã®é³´ãå£°ã¯ä½•ã¨è¨€ã†ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ãƒ‹ãƒ£ãƒ¼', 'ãƒ¯ãƒ³ãƒ¯ãƒ³', 'ãƒ¢ãƒ¼ãƒ¢ãƒ¼', 'ãƒ”ãƒ¨ãƒ”ãƒ¨'], correct: 0 },
                { question: 'çŒ«ã®è¶³ã¯ä½•æœ¬ã‚ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['2æœ¬', '3æœ¬', '4æœ¬', '6æœ¬'], correct: 2 },
                { question: 'çŒ«ãŒã‚ˆãéŠã¶ãŠã‚‚ã¡ã‚ƒã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ', options: ['ãƒœãƒ¼ãƒ«', 'æ¯›ç‰', 'ã¤ã¿ã', 'ã§ã‚“ã—ã‚ƒ'], correct: 1 },
                { question: 'çŒ«ã®ã²ã’ã®å½¹å‰²ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ã‹ã–ã‚Š', 'ã‚»ãƒ³ã‚µãƒ¼', 'ãŸã¹ã‚‚ã®', 'ã¶ã'], correct: 1 },
                { question: 'çŒ«ãŒå¥½ããªå ´æ‰€ã¯ã©ã“ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ã¿ãš', 'ã‚ãŸãŸã‹ã„ã°ã—ã‚‡', 'ã†ã‚‹ã•ã„ã°ã—ã‚‡', 'ãã‚‰ã„ã°ã—ã‚‡'], correct: 1 },
                { question: 'çŒ«ã®ç›®ã¯æš—ã„ã¨ã“ã‚ã§ã©ã†ãªã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['è¦‹ãˆãªããªã‚‹', 'ã‚ˆãè¦‹ãˆã‚‹', 'ã„ã‚ãŒã‹ã‚ã‚‹', 'ã¨ã˜ã‚‹'], correct: 1 },
                { question: 'çŒ«ã®ã—ã£ã½ã¯ã©ã‚“ãªæ™‚ã«å¤§ãããªã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ã†ã‚Œã—ã„æ™‚', 'ãŠã“ã£ãŸæ™‚', 'ã­ã‚€ã„æ™‚', 'ãŠãªã‹ãŒã™ã„ãŸæ™‚'], correct: 1 },
                { question: 'çŒ«ãŒã€Œã‚´ãƒ­ã‚´ãƒ­ã€ã¨éŸ³ã‚’å‡ºã™ã®ã¯ã„ã¤ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ãŠã“ã£ãŸæ™‚', 'ã“ã‚ã„æ™‚', 'ã†ã‚Œã—ã„æ™‚', 'ãŠãªã‹ãŒã™ã„ãŸæ™‚'], correct: 2 },
                { question: 'çŒ«ã®è€³ã¯ã©ã‚“ãªå½¢ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ã¾ã‚‹', 'ã•ã‚“ã‹ã', 'ã—ã‹ã', 'ã»ã—'], correct: 1 },
                { question: 'çŒ«ãŒã‚ˆãé£Ÿã¹ã‚‹ã‚‚ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ', options: ['ãã•', 'ã•ã‹ãª', 'ã„ã—', 'ã‹ã¿'], correct: 1 }
            ],
            2: [ // ãƒ¬ãƒ™ãƒ«2 - å°‘ã—é›£ã—ã
                { question: 'çŒ«ã®å¹³å‡å¯¿å‘½ã¯ã©ã®ãã‚‰ã„ã§ã—ã‚‡ã†ï¼Ÿ', options: ['5å¹´', '10å¹´', '15å¹´', '25å¹´'], correct: 2 },
                { question: 'çŒ«ãŒæ¯›ç‰ã‚’åãã®ã¯ãªãœã§ã—ã‚‡ã†ï¼Ÿ', options: ['ç—…æ°—ã ã‹ã‚‰', 'æ¯›ã¥ãã‚ã„ã§é£²ã¿è¾¼ã‚“ã æ¯›ã‚’å‡ºã™ãŸã‚', 'ãŠã„ã—ã„ã‹ã‚‰', 'ã‚ãã³ã®ãŸã‚'], correct: 1 },
                { question: 'çŒ«ã®è¦–åŠ›ã¯äººé–“ã¨æ¯”ã¹ã¦ã©ã†ã§ã—ã‚‡ã†ï¼Ÿ', options: ['åŒã˜ãã‚‰ã„', 'äººé–“ã‚ˆã‚Šè‰¯ã„', 'äººé–“ã‚ˆã‚Šæ‚ªã„', 'è¦‹ãˆãªã„'], correct: 2 },
                { question: 'çŒ«ãŒé«˜ã„ã¨ã“ã‚ã‹ã‚‰è½ã¡ã¦ã‚‚æ€ªæˆ‘ã‚’ã—ã«ãã„ã®ã¯ãªãœã§ã—ã‚‡ã†ï¼Ÿ', options: ['è»½ã„ã‹ã‚‰', 'æ¯›ãŒãµã‚ãµã‚ã ã‹ã‚‰', 'ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šãŒè‰¯ã„ã‹ã‚‰', 'é‹ãŒè‰¯ã„ã‹ã‚‰'], correct: 2 },
                { question: 'çŒ«ã®é¼»ã®æ¨¡æ§˜ã¯ä½•ã¨åŒã˜ã‚ˆã†ã«å€‹ä½“è­˜åˆ¥ãŒã§ãã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['æŒ‡ç´‹', 'å£°', 'è¶³éŸ³', 'ç›®ã®è‰²'], correct: 0 },
                { question: 'çŒ«ãŒç®±ã‚’å¥½ã‚€ã®ã¯ãªãœã§ã—ã‚‡ã†ï¼Ÿ', options: ['æ¶¼ã—ã„ã‹ã‚‰', 'å®‰å¿ƒã§ãã‚‹ã‹ã‚‰', 'ç¾å‘³ã—ã„ã‹ã‚‰', 'éŠã¹ã‚‹ã‹ã‚‰'], correct: 1 },
                { question: 'çŒ«ã®èˆŒãŒã‚¶ãƒ©ã‚¶ãƒ©ã—ã¦ã„ã‚‹ã®ã¯ãªãœã§ã—ã‚‡ã†ï¼Ÿ', options: ['ç—…æ°—ã ã‹ã‚‰', 'æ¯›ã¥ãã‚ã„ã®ãŸã‚', 'å‘³ãŒã‚ˆãã‚ã‹ã‚‹ãŸã‚', 'å¨åš‡ã®ãŸã‚'], correct: 1 },
                { question: 'çŒ«ãŒã€Œãƒ‹ãƒ£ãƒ¼ã€ã¨é³´ãã®ã¯ä¸»ã«èª°ã«å¯¾ã—ã¦ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ä»–ã®çŒ«', 'äººé–“', 'çŠ¬', 'é³¥'], correct: 1 },
                { question: 'çŒ«ã®è‚‰çƒã®ä¸»ãªå½¹å‰²ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ã‹ã‚ã„ã•ã‚¢ãƒƒãƒ—', 'ã‚·ãƒ§ãƒƒã‚¯ã‚¢ãƒ–ã‚½ãƒ¼ãƒãƒ¼', 'ä½“æ¸©èª¿ç¯€', 'æ­¦å™¨'], correct: 1 },
                { question: 'çŒ«ãŒé ­ã‚„ä½“ã‚’ã“ã™ã‚Šã¤ã‘ã¦ãã‚‹ã®ã¯ãªãœã§ã—ã‚‡ã†ï¼Ÿ', options: ['ã‹ã‚†ã„ã‹ã‚‰', 'ã«ãŠã„ã‚’ã¤ã‘ã‚‹ãŸã‚', 'ã‚ã¾ãˆã¦ã„ã‚‹ã‹ã‚‰', 'é‹å‹•ã®ãŸã‚'], correct: 1 }
            ],
            3: [ // ãƒ¬ãƒ™ãƒ«3 - ä¸­ç´š
                { question: 'çŒ«ã®å“ç¨®ã§æœ€ã‚‚å°ã•ã„ã¨ã•ã‚Œã‚‹ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ', options: ['ãƒãƒ³ãƒã‚«ãƒ³', 'ã‚·ãƒ³ã‚¬ãƒ—ãƒ¼ãƒ©', 'ãƒšãƒ«ã‚·ãƒ£', 'ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ¼ãƒ³'], correct: 1 },
                { question: 'çŒ«ã®ç¡çœ æ™‚é–“ã¯1æ—¥ä½•æ™‚é–“ãã‚‰ã„ã§ã—ã‚‡ã†ï¼Ÿ', options: ['8æ™‚é–“', '12æ™‚é–“', '16æ™‚é–“', '20æ™‚é–“'], correct: 2 },
                { question: 'çŒ«ã®ä½“æ¸©ã¯äººé–“ã‚ˆã‚Šé«˜ã„ï¼Ÿä½ã„ï¼Ÿ', options: ['é«˜ã„', 'ä½ã„', 'åŒã˜', 'æ¸¬ã‚Œãªã„'], correct: 0 },
                { question: 'çŒ«ã®å¿ƒè‡“ã¯1åˆ†é–“ã«ä½•å›ãã‚‰ã„æ‹å‹•ã™ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['60å›', '120å›', '200å›', '300å›'], correct: 1 },
                { question: 'çŒ«ãŒæ°´ã‚’ã‚ã¾ã‚Šé£²ã¾ãªã„ã®ã¯ãªãœã§ã—ã‚‡ã†ï¼Ÿ', options: ['æ°´ãŒå«Œã„ã ã‹ã‚‰', 'ç¥–å…ˆãŒç ‚æ¼ ã®å‹•ç‰©ã ã£ãŸã‹ã‚‰', 'ç—…æ°—ã ã‹ã‚‰', 'å¹´ã®ã›ã„'], correct: 1 },
                { question: 'çŒ«ã®ã²ã’ã¯ä½•æœ¬ãã‚‰ã„ã‚ã‚‹ã§ã—ã‚‡ã†ï¼Ÿï¼ˆç‰‡å´ï¼‰', options: ['6æœ¬', '12æœ¬', '24æœ¬', '36æœ¬'], correct: 1 },
                { question: 'çŒ«ãŒã€Œãƒ•ã‚·ãƒ£ãƒ¼ã€ã¨å¨åš‡ã™ã‚‹æ™‚ã®å§¿å‹¢ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ', options: ['ä¸¸ããªã‚‹', 'èƒŒä¸­ã‚’ä¸¸ã‚ã¦æ¯›ã‚’é€†ç«‹ã¦ã‚‹', 'å¯ãã¹ã‚‹', 'èµ°ã‚Šå›ã‚‹'], correct: 1 },
                { question: 'çŒ«ã®å¦Šå¨ æœŸé–“ã¯ã©ã®ãã‚‰ã„ã§ã—ã‚‡ã†ï¼Ÿ', options: ['1ãƒ¶æœˆ', '2ãƒ¶æœˆ', '4ãƒ¶æœˆ', '6ãƒ¶æœˆ'], correct: 1 },
                { question: 'çŒ«ãŒæ¯›ã¥ãã‚ã„ã«è²»ã‚„ã™æ™‚é–“ã¯1æ—¥ã®ä½•å‰²ã§ã—ã‚‡ã†ï¼Ÿ', options: ['1å‰²', '3å‰²', '5å‰²', '7å‰²'], correct: 1 },
                { question: 'çŒ«ã®æ­¯ã¯å…¨éƒ¨ã§ä½•æœ¬ã‚ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['24æœ¬', '30æœ¬', '36æœ¬', '42æœ¬'], correct: 1 }
            ],
            4: [ // ãƒ¬ãƒ™ãƒ«4 - ä¸Šç´š
                { question: 'çŒ«ã®DNAã¯äººé–“ã®DNAã¨ä½•ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆä¼¼ã¦ã„ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['50%', '70%', '90%', '95%'], correct: 2 },
                { question: 'çŒ«ã®å“ç¨®ã€Œã‚¹ã‚³ãƒ†ã‚£ãƒƒã‚·ãƒ¥ãƒ•ã‚©ãƒ¼ãƒ«ãƒ‰ã€ã®ç‰¹å¾´ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ', options: ['é•·ã„æ¯›', 'æŠ˜ã‚Œè€³', 'çŸ­ã„ã—ã£ã½', 'å¤§ããªç›®'], correct: 1 },
                { question: 'çŒ«ãŒã€Œã‚±ã‚±ã‚±ã€ã¨é³´ãã®ã¯ã„ã¤ã§ã—ã‚‡ã†ï¼Ÿ', options: ['æ€’ã£ã¦ã„ã‚‹æ™‚', 'ç²ç‰©ã‚’è¦‹ã¤ã‘ãŸæ™‚', 'ç”˜ãˆã¦ã„ã‚‹æ™‚', 'çœ ã„æ™‚'], correct: 1 },
                { question: 'çŒ«ã®è‰²è¦šã«ã¤ã„ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ', options: ['äººé–“ã¨åŒã˜', 'ç™½é»’ã—ã‹è¦‹ãˆãªã„', 'é’ã¨ç·‘ãŒè¦‹ãˆã‚‹', 'èµ¤ãŒã‚ˆãè¦‹ãˆã‚‹'], correct: 2 },
                { question: 'çŒ«ã®å“ç¨®ã§æœ€ã‚‚å¤§ãããªã‚‹ã®ã¯ã©ã‚Œã§ã—ã‚‡ã†ï¼Ÿ', options: ['ãƒšãƒ«ã‚·ãƒ£', 'ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ¼ãƒ³', 'ãƒ­ã‚·ã‚¢ãƒ³ãƒ–ãƒ«ãƒ¼', 'ã‚¢ãƒ¡ãƒªã‚«ãƒ³ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢'], correct: 1 },
                { question: 'çŒ«ãŒäººã«é ­çªãã‚’ã—ã¦ãã‚‹ã®ã‚’ãªã‚“ã¨è¨€ã†ã§ã—ã‚‡ã†ï¼Ÿ', options: ['ãƒ˜ãƒƒãƒ‰ãƒãƒƒãƒˆ', 'ãƒãƒ³ã‚­ãƒ³ã‚°', 'ãƒ˜ãƒƒãƒ‡ã‚£ãƒ³ã‚°', 'ã‚¢ã‚¿ãƒƒã‚¯'], correct: 1 },
                { question: 'çŒ«ã®ç³å­”ãŒç¸¦ã«ç´°ããªã‚‹ã®ã¯ãªãœã§ã—ã‚‡ã†ï¼Ÿ', options: ['ã‹ã£ã“ã„ã„ã‹ã‚‰', 'å…‰ã®èª¿ç¯€ã®ãŸã‚', 'ç²ç‰©ã‚’ç‹™ã†ãŸã‚', 'æ„Ÿæƒ…è¡¨ç¾'], correct: 1 },
                { question: 'çŒ«ã®å“ç¨®ã€Œãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«ã€ã®åå‰ã®ç”±æ¥ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ', options: ['å¤§ãã„ã‹ã‚‰', 'æŠ±ã£ã“ã•ã‚Œã‚‹ã¨ãã£ãŸã‚Šã™ã‚‹ã‹ã‚‰', 'ãµã‚ãµã‚ã ã‹ã‚‰', 'äººå½¢ã¿ãŸã„ã ã‹ã‚‰'], correct: 1 },
                { question: 'çŒ«ãŒã€Œã¡ã‚…ãƒ¼ã‚‹ã€ãªã©ã®æ¶²çŠ¶ãŠã‚„ã¤ã‚’å¥½ã‚€ã®ã¯ãªãœã§ã—ã‚‡ã†ï¼Ÿ', options: ['ç”˜ã„ã‹ã‚‰', 'åŒ‚ã„ãŒå¼·ã„ã‹ã‚‰', 'èˆã‚ã‚„ã™ã„ã‹ã‚‰', 'å…¨éƒ¨æ­£è§£'], correct: 3 },
                { question: 'é‡è‰¯çŒ«ã®å¹³å‡å¯¿å‘½ã¯é£¼ã„çŒ«ã‚ˆã‚Šã©ã®ãã‚‰ã„çŸ­ã„ã§ã—ã‚‡ã†ï¼Ÿ', options: ['1-2å¹´çŸ­ã„', '5-10å¹´çŸ­ã„', 'å¤‰ã‚ã‚‰ãªã„', 'é•·ã„'], correct: 1 }
            ],
            5: [ // ãƒ¬ãƒ™ãƒ«5 - æœ€ä¸Šç´š
                { question: 'çŒ«ã®å­¦åã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ', options: ['Felis domesticus', 'Felis catus', 'Felis silvestris', 'Felis cattus'], correct: 1 },
                { question: 'çŒ«ãŒäººé–“ã‚’ã€Œå¤§ããªçŒ«ã€ã ã¨æ€ã£ã¦ã„ã‚‹ã¨ã„ã†èª¬ã®æ ¹æ‹ ã¯ï¼Ÿ', options: ['é³´ãæ–¹', 'è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³', 'å¤§äººã«ãªã£ã¦ã‚‚é³´ã', 'å…¨éƒ¨æ­£è§£'], correct: 3 },
                { question: 'çŒ«ã®å“ç¨®ã€Œã‚¨ã‚¸ãƒ—ã‚·ãƒ£ãƒ³ãƒã‚¦ã€ã®ç‰¹å¾´ã¯ï¼Ÿ', options: ['ç„¡æ¯›', 'è‡ªç„¶ã®ã‚¹ãƒãƒƒãƒˆæ¨¡æ§˜', 'é’ã„ç›®', 'å·¨å¤§'], correct: 1 },
                { question: 'çŒ«ã®ãƒ•ãƒ¬ãƒ¼ãƒ¡ãƒ³åå¿œã¨ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ', options: ['æ¯›ãŒé€†ç«‹ã¤ã“ã¨', 'å£ã‚’åŠé–‹ãã«ã™ã‚‹ã“ã¨', 'ã—ã£ã½ã‚’æŒ¯ã‚‹ã“ã¨', 'ä¸¸ããªã‚‹ã“ã¨'], correct: 1 },
                { question: 'çŒ«ã®ç¥–å…ˆã¨ã•ã‚Œã‚‹ã€Œãƒªãƒ“ã‚¢ãƒ¤ãƒãƒã‚³ã€ã¯ã©ã“ã«ä½ã‚“ã§ã„ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['å—æ¥µ', 'ã‚¢ãƒ•ãƒªã‚«ãƒ»ä¸­æ±', 'åŒ—æ¥µ', 'å—ã‚¢ãƒ¡ãƒªã‚«'], correct: 1 },
                { question: 'çŒ«ã®å“ç¨®ã§æœ€ã‚‚æ¯›ãŒé•·ã„ã¨ã•ã‚Œã‚‹ã®ã¯ï¼Ÿ', options: ['ãƒšãƒ«ã‚·ãƒ£', 'ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ¼ãƒ³', 'ãƒ©ã‚°ãƒ‰ãƒ¼ãƒ«', 'ãƒãƒ«ã‚¦ã‚§ãƒ¼ã‚¸ãƒ£ãƒ³ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆã‚­ãƒ£ãƒƒãƒˆ'], correct: 0 },
                { question: 'çŒ«ã®ã€Œã‚µã‚¤ãƒ¬ãƒ³ãƒˆãƒ‹ãƒ£ãƒ¼ã€ã¨ã¯ä½•ã§ã—ã‚‡ã†ï¼Ÿ', options: ['å£°ã‚’å‡ºã•ãšã«é³´ãä»•è‰', 'å¯è¨€', 'å¨åš‡', 'ç—…æ°—'], correct: 0 },
                { question: 'çŒ«ã®å“ç¨®ã€Œãƒ™ãƒ³ã‚¬ãƒ«ã€ã®è¡€çµ±ã«å«ã¾ã‚Œã‚‹é‡ç”ŸçŒ«ã¯ï¼Ÿ', options: ['ãƒ©ã‚¤ã‚ªãƒ³', 'ãƒ™ãƒ³ã‚¬ãƒ«ãƒ¤ãƒãƒã‚³', 'ãƒãƒ¼ã‚¿ãƒ¼', 'ãƒ”ãƒ¥ãƒ¼ãƒ'], correct: 1 },
                { question: 'çŒ«ãŒã€Œãƒãƒ¼ã‚­ãƒ³ã‚°ã€ã§ä½¿ã†ä½“ã®éƒ¨ä½ã¯ã„ãã¤ã‚ã‚‹ã§ã—ã‚‡ã†ï¼Ÿ', options: ['1ã¤', '3ã¤', '5ã¤', '7ã¤ä»¥ä¸Š'], correct: 3 },
                { question: 'çŒ«ã®ã€Œã‚­ãƒ£ãƒƒãƒˆãƒ‹ãƒƒãƒ—ã€ã¸ã®åå¿œã¯ä½•ã«ã‚ˆã‚‹ã‚‚ã®ã§ã—ã‚‡ã†ï¼Ÿ', options: ['å‘³', 'åŒ‚ã„æˆåˆ†', 'é£Ÿæ„Ÿ', 'è‰²'], correct: 1 }
            ]
        };

        // ç”»é¢è¦ç´ ã®å–å¾—
        const startScreen = document.getElementById('startScreen');
        const gameScreen = document.getElementById('gameScreen');
        const resultScreen = document.getElementById('resultScreen');

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        document.addEventListener('DOMContentLoaded', function() {
            initializeGame();
            setupEventListeners();
        });

        function initializeGame() {
            updateCatDisplay();
            showScreen('startScreen');
        }

        function setupEventListeners() {
            // ãƒ¬ãƒ™ãƒ«é¸æŠãƒœã‚¿ãƒ³
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const level = parseInt(this.dataset.level);
                    startGame(level);
                });
            });

            // é¸æŠè‚¢ãƒœã‚¿ãƒ³
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!this.disabled) {
                        selectAnswer(parseInt(this.dataset.answer));
                    }
                });
            });

            // çµæœç”»é¢ã®ãƒœã‚¿ãƒ³
            document.getElementById('nextLevelBtn').addEventListener('click', function() {
                if (gameState.currentLevel < 5) {
                    startGame(gameState.currentLevel + 1);
                } else {
                    showScreen('startScreen');
                }
            });

            document.getElementById('retryBtn').addEventListener('click', function() {
                startGame(gameState.currentLevel);
            });

            document.getElementById('homeBtn').addEventListener('click', function() {
                showScreen('startScreen');
            });
        }

        function showScreen(screenName) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenName).classList.add('active');
        }

        function startGame(level) {
            gameState.currentLevel = level;
            gameState.currentQuestion = 0;
            gameState.score = 0;
            gameState.correctAnswers = 0;
            gameState.timeLeft = 30;
            gameState.questions = [...quizDatabase[level]].sort(() => Math.random() - 0.5);

            updateGameDisplay();
            showScreen('gameScreen');
            loadQuestion();
            startTimer();
        }

        function updateGameDisplay() {
            document.getElementById('currentLevel').textContent = `ãƒ¬ãƒ™ãƒ« ${gameState.currentLevel}`;
            document.getElementById('questionNumber').textContent = `å•é¡Œ ${gameState.currentQuestion + 1}/${gameState.totalQuestions}`;
            document.getElementById('score').textContent = `ã‚¹ã‚³ã‚¢: ${gameState.score}`;
            
            const progress = (gameState.currentQuestion / gameState.totalQuestions) * 100;
            document.getElementById('progress').style.width = `${progress}%`;

            updateCatStatus();
        }

        function updateCatStatus() {
            const gameCat = document.getElementById('gameCat');
            const catEmotion = document.getElementById('catEmotion');
            const catMessage = document.getElementById('catMessage');

            const currentCat = catEvolutions[gameState.catLevel];
            gameCat.textContent = currentCat.emoji;

            // æ­£è§£ç‡ã«å¿œã˜ã¦çŒ«ã®æ„Ÿæƒ…ã‚’å¤‰ãˆã‚‹
            const accuracy = gameState.currentQuestion > 0 ? (gameState.correctAnswers / gameState.currentQuestion) : 1;
            
            if (accuracy >= 0.8) {
                catEmotion.textContent = 'ğŸ˜Š';
                catMessage.textContent = 'ã™ã”ã„ã«ã‚ƒï¼';
                gameCat.style.transform = 'scale(1.1)';
            } else if (accuracy >= 0.6) {
                catEmotion.textContent = 'ğŸ˜¸';
                catMessage.textContent = 'ãŒã‚“ã°ã£ã¦ã‚‹ã«ã‚ƒï¼';
                gameCat.style.transform = 'scale(1.05)';
            } else if (accuracy >= 0.4) {
                catEmotion.textContent = 'ğŸ˜';
                catMessage.textContent = 'ãµãã„ã¨ã«ã‚ƒï¼';
                gameCat.style.transform = 'scale(1)';
            } else {
                catEmotion.textContent = 'ğŸ˜¿';
                catMessage.textContent = 'ãŒã‚“ã°ã‚‹ã«ã‚ƒ...';
                gameCat.style.transform = 'scale(0.95)';
            }
        }

        function loadQuestion() {
            if (gameState.currentQuestion >= gameState.totalQuestions) {
                endGame();
                return;
            }

            const question = gameState.questions[gameState.currentQuestion];
            document.getElementById('question').textContent = question.question;

            const optionBtns = document.querySelectorAll('.option-btn');
            optionBtns.forEach((btn, index) => {
                btn.textContent = question.options[index];
                btn.disabled = false;
                btn.className = 'option-btn';
            });

            updateGameDisplay();
            resetTimer();
        }

        function selectAnswer(selectedIndex) {
            const question = gameState.questions[gameState.currentQuestion];
            const optionBtns = document.querySelectorAll('.option-btn');
            
            // ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            optionBtns.forEach(btn => btn.disabled = true);

            // æ­£è§£ãƒ»ä¸æ­£è§£ã®è¡¨ç¤º
            if (selectedIndex === question.correct) {
                optionBtns[selectedIndex].classList.add('correct');
                gameState.correctAnswers++;
                gameState.score += Math.max(10, gameState.timeLeft * 2); // æ®‹ã‚Šæ™‚é–“ã«å¿œã˜ã¦ãƒœãƒ¼ãƒŠã‚¹
                
                // æ­£è§£æ™‚ã®çŒ«ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
                showCatReaction(true);
            } else {
                optionBtns[selectedIndex].classList.add('incorrect');
                optionBtns[question.correct].classList.add('correct');
                
                // ä¸æ­£è§£æ™‚ã®çŒ«ã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
                showCatReaction(false);
            }

            // ã‚¿ã‚¤ãƒãƒ¼ã‚’æ­¢ã‚ã‚‹
            clearInterval(gameState.timer);

            // æ¬¡ã®å•é¡Œã¸é€²ã‚€
            setTimeout(() => {
                gameState.currentQuestion++;
                loadQuestion();
            }, 1500);
        }

        function showCatReaction(isCorrect) {
            const gameCat = document.getElementById('gameCat');
            const catEmotion = document.getElementById('catEmotion');
            const catMessage = document.getElementById('catMessage');

            if (isCorrect) {
                catEmotion.textContent = 'ğŸ‰';
                catMessage.textContent = 'ã‚„ã£ãŸã«ã‚ƒï¼';
                gameCat.style.animation = 'bounce 0.6s ease';
                
                // ã‚µã‚¦ãƒ³ãƒ‰åŠ¹æœã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆè¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰
                gameCat.style.filter = 'brightness(1.3)';
                setTimeout(() => {
                    gameCat.style.filter = 'brightness(1)';
                    gameCat.style.animation = '';
                }, 600);
            } else {
                catEmotion.textContent = 'ğŸ’¦';
                catMessage.textContent = 'ã¤ãã¯ãŒã‚“ã°ã‚‹ã«ã‚ƒ';
                gameCat.style.animation = 'shake 0.6s ease';
                
                setTimeout(() => {
                    gameCat.style.animation = '';
                }, 600);
            }
        }

        function startTimer() {
            gameState.timeLeft = 30;
            updateTimer();
            
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                updateTimer();
                
                if (gameState.timeLeft <= 0) {
                    selectAnswer(-1); // ã‚¿ã‚¤ãƒ ã‚¢ãƒƒãƒ—ã§ä¸æ­£è§£æ‰±ã„
                }
            }, 1000);
        }

        function resetTimer() {
            clearInterval(gameState.timer);
            startTimer();
        }

        function updateTimer() {
            const timerElement = document.getElementById('timer');
            timerElement.textContent = gameState.timeLeft;
            
            if (gameState.timeLeft <= 10) {
                timerElement.classList.add('warning');
            } else {
                timerElement.classList.remove('warning');
            }
        }

        function updateCatDisplay() {
            const catDisplay = document.querySelector('.cat-display .cat');
            const catName = document.querySelector('.cat-name');
            const catLevel = document.querySelector('.cat-level');

            const currentCat = catEvolutions[gameState.catLevel];
            catDisplay.textContent = currentCat.emoji;
            catName.textContent = currentCat.name;
            catLevel.textContent = `ãƒ¬ãƒ™ãƒ«: ${gameState.catLevel}`;
        }

        function endGame() {
            clearInterval(gameState.timer);
            
            // çŒ«ã®ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—åˆ¤å®š
            const accuracy = gameState.correctAnswers / gameState.totalQuestions;
            const oldCatLevel = gameState.catLevel;
            
            if (accuracy >= 0.8) {
                gameState.catLevel = Math.min(gameState.catLevel + 1, 5);
            } else if (accuracy >= 0.6) {
                // ãƒ¬ãƒ™ãƒ«ç¶­æŒ
            } else {
                // ãƒ¬ãƒ™ãƒ«ã¯ä¸‹ãŒã‚‰ãªã„ï¼ˆå„ªã—ã„è¨­è¨ˆï¼‰
            }

            showResults(oldCatLevel);
            showScreen('resultScreen');
        }

        function showResults(oldCatLevel) {
            const accuracy = Math.round((gameState.correctAnswers / gameState.totalQuestions) * 100);
            
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('accuracy').textContent = `${accuracy}%`;

            // çŒ«ã®é€²åŒ–è¡¨ç¤º
            const oldCat = document.getElementById('oldCat');
            const newCat = document.getElementById('newCat');
            const evolutionMessage = document.getElementById('evolutionMessage');

            oldCat.textContent = catEvolutions[oldCatLevel].emoji;
            newCat.textContent = catEvolutions[gameState.catLevel].emoji;

            if (gameState.catLevel > oldCatLevel) {
                evolutionMessage.textContent = `ãŠã‚ã§ã¨ã†ï¼${catEvolutions[gameState.catLevel].name}ã«é€²åŒ–ã—ãŸã«ã‚ƒï¼`;
                evolutionMessage.style.color = '#FF69B4';
                evolutionMessage.style.fontWeight = 'bold';
                
                // ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—éŸ³ã‚’å†ç”Ÿ
                playSound('levelup');
                
                // é€²åŒ–ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                newCat.style.animation = 'bounce 2s infinite';
            } else {
                evolutionMessage.textContent = `${catEvolutions[gameState.catLevel].name}ã®ã¾ã¾ã ã«ã‚ƒã€‚æ¬¡å›ãŒã‚“ã°ã‚ã†ï¼`;
                evolutionMessage.style.color = '#8B4513';
            }

            // çµæœã«å¿œã˜ãŸã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›´
            const resultTitle = document.getElementById('resultTitle');
            if (accuracy >= 90) {
                resultTitle.textContent = 'ğŸ† ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼ ğŸ†';
                resultTitle.style.color = '#FFD700';
            } else if (accuracy >= 70) {
                resultTitle.textContent = 'âœ¨ ã™ã°ã‚‰ã—ã„ï¼ âœ¨';
                resultTitle.style.color = '#FF69B4';
            } else if (accuracy >= 50) {
                resultTitle.textContent = 'ğŸ‘ ãŒã‚“ã°ã£ãŸã­ï¼ ğŸ‘';
                resultTitle.style.color = '#32CD32';
            } else {
                resultTitle.textContent = 'ğŸ’ª æ¬¡å›ãŒã‚“ã°ã‚ã†ï¼ ğŸ’ª';
                resultTitle.style.color = '#8B4513';
            }

            // æ¬¡ã®ãƒ¬ãƒ™ãƒ«ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºåˆ¶å¾¡
            const nextLevelBtn = document.getElementById('nextLevelBtn');
            if (gameState.currentLevel < 5 && accuracy >= 60) {
                nextLevelBtn.style.display = 'block';
                nextLevelBtn.textContent = `ãƒ¬ãƒ™ãƒ«${gameState.currentLevel + 1}ã«æŒ‘æˆ¦ï¼`;
            } else if (gameState.currentLevel >= 5) {
                nextLevelBtn.style.display = 'none';
            } else {
                nextLevelBtn.style.display = 'none';
            }

            updateCatDisplay();
        }
    </script>
</body>
</html>
